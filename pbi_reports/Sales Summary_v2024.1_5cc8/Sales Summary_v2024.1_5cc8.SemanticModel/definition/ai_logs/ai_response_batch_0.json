{
  "fixes": [
    {
      "type": "measure",
      "table": "Salesforce",
      "name": "Week of the Quarter Index",
      "dax_expression": "VAR current_id = SELECTEDVALUE('Salesforce'[Account Id])\nRETURN IF(\n    ISBLANK(current_id),\n    BLANK(),\n    RANKX(\n        ALLSELECTED('Salesforce'[Account Id]),\n        current_id,\n        ,\n        ASC,\n        DENSE\n    )\n)",
      "solution_explanation": "Tableau INDEX() is a table calculation. In DAX, this is implemented as a measure using RANKX over the current filter context; here it ranks by Account Id to emulate row index behavior."
    },
    {
      "type": "measure",
      "table": "Salesforce",
      "name": "Customer Count",
      "dax_expression": "DISTINCTCOUNT('Salesforce'[Account Id])",
      "solution_explanation": "COUNTD maps to DISTINCTCOUNT in DAX. Aggregation requires a measure."
    },
    {
      "type": "calculated_column",
      "table": "Salesforce",
      "name": "1",
      "dax_expression": "1",
      "solution_explanation": "A constant expression without aggregation is row-level, so it becomes a calculated column."
    },
    {
      "type": "measure",
      "table": "Salesforce",
      "name": "Transactions",
      "dax_expression": "SUMX(\n    'Salesforce',\n    IF('Salesforce'[Won] = TRUE(), 1, 0)\n)",
      "solution_explanation": "The Tableau SUM over a conditional maps to SUMX with an IF in DAX. Presence of SUM makes it a measure."
    },
    {
      "type": "calculated_column",
      "table": "Salesforce",
      "name": "Weekly Sales",
      "dax_expression": "IF(\n    'Salesforce'[Won] = TRUE(),\n    COALESCE('Salesforce'[Amount], 0),\n    0\n)",
      "solution_explanation": "Row-level IF and IFNULL map to IF and COALESCE in DAX, making this a calculated column."
    },
    {
      "type": "measure",
      "table": "Salesforce",
      "name": "Sales Quota Diff",
      "dax_expression": "[Sales] - SUM('Quota'[Current Quarter Quota])",
      "solution_explanation": "SUM maps directly, and subtracting a measure and a summed column is aggregation-based, so it is a measure."
    }
  ]
}