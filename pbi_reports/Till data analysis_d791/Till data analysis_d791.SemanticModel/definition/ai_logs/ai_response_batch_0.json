[
  {
    "type": "measure",
    "table": "Parameters",
    "name": "Select date",
    "dax_expression": "DATE(2022, 11, 17)",
    "solution_explanation": "Parameter 'Select date' is represented as a measure returning a date. The default value from Tableau '#2022-11-17#' is translated to a DAX date literal."
  },
  {
    "type": "measure",
    "table": "Parameters",
    "name": "Select Period",
    "dax_expression": "1",
    "solution_explanation": "Parameter 'Select Period' is represented as a measure returning the constant 1."
  },
  {
    "type": "calculated_column",
    "table": "Orders+ (Sample - Superstore)",
    "name": "Previous year",
    "dax_expression": "VAR selDate = [Select date]\nVAR upperBound = DATE(YEAR(selDate) - 1, MONTH(selDate), DAY(selDate))\nVAR innerDate =\n    IF MONTH(selDate) <= 3\n        THEN DATE(YEAR(selDate) - 2, 4, 1)\n        ELSE IF MONTH(selDate) >= 4 && (YEAR(selDate) - 1) = YEAR('Orders+ (Sample - Superstore)'[Order Date])\n             THEN DATE(YEAR(selDate) - 1, 4, 1)\n             ELSE BLANK()\nRETURN\nIF ('Orders+ (Sample - Superstore)'[Order Date] <= upperBound && 'Orders+ (Sample - Superstore)'[Order Date] >= innerDate,\n    'Orders+ (Sample - Superstore)'[Sales],\n    BLANK())",
    "solution_explanation": "Implements row-level (calculated column) logic to return Sales for orders within a specific previous-year window determined by the selected date parameter."
  },
  {
    "type": "measure",
    "table": "Orders+ (Sample - Superstore)",
    "name": "Calculation1",
    "dax_expression": "NOT(ISBLANK(SUM('Orders+ (Sample - Superstore)'[Current year]))) || NOT(ISBLANK(SUM('Orders+ (Sample - Superstore)'[Previous year])))",
    "solution_explanation": "Evaluates whether there is any non-blank aggregated value in either the Current year or Previous year fields, returning a boolean result."
  },
  {
    "type": "calculated_column",
    "table": "Orders+ (Sample - Superstore)",
    "name": "Current year",
    "dax_expression": "IF ('Orders+ (Sample - Superstore)'[Dynamic Measure values with YTD/MTD/QTD], 'Orders+ (Sample - Superstore)'[Sales], BLANK())",
    "solution_explanation": "Calculates per row whether to return Sales based on a dynamic YTD/MTD/QTD flag; otherwise returns blank."
  },
  {
    "type": "measure",
    "table": "Orders+ (Sample - Superstore)",
    "name": "Dynamic years",
    "dax_expression": "SELECTEDVALUE('Parameters'[Select date])",
    "solution_explanation": "Returns the selected date parameter value, enabling dynamic year calculations driven by user choice."
  }
]