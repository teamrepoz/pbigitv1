{
  "calculations": [
    {
      "name": "Sales after Discount",
      "table_name": "order_items+",
      "tableau_expression": "SUM([LineTotal])  // if LineTotal already has discount applied; else SUM([UnitPrice]*[Quantity]) - SUM([Discount Amount])",
      "datatype": "real",
      "calculation_context": {
        "Expression": "SUM([LineTotal])  // if LineTotal already has discount applied; else SUM([UnitPrice]*[Quantity]) - SUM([Discount Amount])",
        "calculated_fields": {
          "Discount Amount": "([UnitPrice] * [Quantity]) * ([DiscountPct] / 100)"
        },
        "parameters": [],
        "col_to_datatype_mapping": {
          "Quantity": "integer",
          "UnitPrice": "real",
          "DiscountPct": "integer",
          "LineTotal": "real"
        },
        "calc_fields_to_datatype_mapping": {
          "Discount Amount": "real"
        }
      }
    }
  ]
}