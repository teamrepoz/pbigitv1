{
  "fixes": [
    {
      "type": "measure",
      "table": "customers+",
      "name": "Top N Customers Flag",
      "dax_expression": "VAR CurrentClaimAmount = CALCULATE(SUM('customers+'[ClaimAmount]))\nVAR RankValue = RANKX(ALL('customers+'), CALCULATE(SUM('customers+'[ClaimAmount])), CurrentClaimAmount, DESC, SKIP)\nVAR TopN = SELECTEDVALUE('Top N Customers'[Display As])\nRETURN RankValue <= TopN",
      "solution_explanation": "Converted Tableau RANK_UNIQUE(SUM([ClaimAmount])) <= [Parameters].[Top N Customers] into DAX. SUM([ClaimAmount]) -> CALCULATE(SUM('customers+'[ClaimAmount])). RANK_UNIQUE(...) is implemented with RANKX over ALL('customers+') to rank customers by their total ClaimAmount. Tableau parameter [Parameters].[Top N Customers] -> SELECTEDVALUE('Top N Customers'[Display As]). The measure returns TRUE when the customer's rank is within the selected Top N.",
      "type_changed_reason": "The calculation uses aggregation (SUM) and a parameter reference, and it relies on a table calculation (ranking), so it must be created as a measure."
    }
  ]
}