{
  "fixes": [
    {
      "type": "measure",
      "table": "migration_Extract_POC (1) (local copy)",
      "name": "Proj Bal ",
      "dax_expression": "VAR _fixedDTM = 'migration_Extract_POC (1) (local copy)'[fixed DTM]\n\nVAR _when0 =\n    CALCULATE(\n        SUMX(\n            'migration_Extract_POC (1) (local copy)',\n            IF(\n                'migration_Extract_POC (1) (local copy)'[Maturity Date] > 'migration_Extract_POC (1) (local copy)'[date series]\n                && 'migration_Extract_POC (1) (local copy)'[Start date] <= 'migration_Extract_POC (1) (local copy)'[date series]\n                && 'migration_Extract_POC (1) (local copy)'[Source] <> \"EUROCLEAR\"\n                && 'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)] = \"Repo\"\n                && INT('migration_Extract_POC (1) (local copy)'[Is Internal ?]) <> 1,\n                'migration_Extract_POC (1) (local copy)'[Initial Cash USD T],\n                0\n            )\n        ),\n        ALLEXCEPT(\n            'migration_Extract_POC (1) (local copy)',\n            'migration_Extract_POC (1) (local copy)'[RpDate],\n            'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)]\n        )\n    )\n\nVAR _when1 =\n    CALCULATE(\n        SUMX(\n            'migration_Extract_POC (1) (local copy)',\n            IF(\n                'migration_Extract_POC (1) (local copy)'[Maturity Date] > 'migration_Extract_POC (1) (local copy)'[date series]\n                && 'migration_Extract_POC (1) (local copy)'[Start date] <= 'migration_Extract_POC (1) (local copy)'[date series]\n                && 'migration_Extract_POC (1) (local copy)'[Source] <> \"EUROCLEAR\"\n                && 'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)] = \"Repo\"\n                && INT('migration_Extract_POC (1) (local copy)'[Is Internal ?]) <> 1,\n                'migration_Extract_POC (1) (local copy)'[Initial Cash USD T],\n                0\n            )\n        ),\n        ALLEXCEPT(\n            'migration_Extract_POC (1) (local copy)',\n            'migration_Extract_POC (1) (local copy)'[RpDate]\n        )\n    )\n\nVAR _when2 =\n    CALCULATE(\n        SUMX(\n            'migration_Extract_POC (1) (local copy)',\n            IF(\n                'migration_Extract_POC (1) (local copy)'[Maturity Date] > 'migration_Extract_POC (1) (local copy)'[date series]\n                && 'migration_Extract_POC (1) (local copy)'[Start date] <= 'migration_Extract_POC (1) (local copy)'[date series]\n                && 'migration_Extract_POC (1) (local copy)'[Source] <> \"EUROCLEAR\"\n                && 'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)] = \"Repo\"\n                && 'migration_Extract_POC (1) (local copy)'[Is Internal ?] <> \"1\",\n                'migration_Extract_POC (1) (local copy)'[Initial Cash USD T],\n                0\n            )\n        ),\n        ALLEXCEPT(\n            'migration_Extract_POC (1) (local copy)',\n            'migration_Extract_POC (1) (local copy)'[RpDate]\n        )\n    )\n\nVAR _when3 =\n    CALCULATE(\n        SUMX(\n            'migration_Extract_POC (1) (local copy)',\n            IF(\n                INT('migration_Extract_POC (1) (local copy)'[DTM T ]) >= 3\n                && 'migration_Extract_POC (1) (local copy)'[Source] <> \"EUROCLEAR\"\n                && 'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)] <> \"non\",\n                'migration_Extract_POC (1) (local copy)'[Initial Cash USD T (excl Int/FWD)],\n                0\n            )\n        ),\n        ALLEXCEPT(\n            'migration_Extract_POC (1) (local copy)',\n            'migration_Extract_POC (1) (local copy)'[RpDate]\n        )\n    )\n\nVAR _when4 =\n    CALCULATE(\n        SUMX(\n            'migration_Extract_POC (1) (local copy)',\n            IF(\n                INT('migration_Extract_POC (1) (local copy)'[DTM T ]) >= 4\n                && 'migration_Extract_POC (1) (local copy)'[Source] <> \"EUROCLEAR\"\n                && 'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)] <> \"non\",\n                'migration_Extract_POC (1) (local copy)'[Initial Cash USD T (excl Int/FWD)],\n                0\n            )\n        ),\n        ALLEXCEPT(\n            'migration_Extract_POC (1) (local copy)',\n            'migration_Extract_POC (1) (local copy)'[RpDate]\n        )\n    )\n\nVAR _when5 =\n    CALCULATE(\n        SUMX(\n            'migration_Extract_POC (1) (local copy)',\n            IF(\n                INT('migration_Extract_POC (1) (local copy)'[DTM T ]) >= 5\n                && 'migration_Extract_POC (1) (local copy)'[Source] <> \"EUROCLEAR\"\n                && 'migration_Extract_POC (1) (local copy)'[R/Rr (non repos)] <> \"non\",\n                'migration_Extract_POC (1) (local copy)'[Initial Cash USD T (excl Int/FWD)],\n                0\n            )\n        ),\n        ALLEXCEPT(\n            'migration_Extract_POC (1) (local copy)',\n            'migration_Extract_POC (1) (local copy)'[RpDate]\n        )\n    )\n\nRETURN\nSWITCH(\n    _fixedDTM,\n    \"0\", _when0,\n    \"1\", _when1,\n    \"2\", _when2,\n    \"3\", _when3,\n    \"4\", _when4,\n    \"5\", _when5,\n    0\n)",
      "solution_explanation": "Translated the CASE with FIXED LOD expressions into a measure using VARs and CALCULATE+SUMX with ALLEXCEPT to emulate the FIXED partitioning. Each WHEN branch computes the SUM of the conditional expression across the desired FIXED dimensions. The final SWITCH returns the matching branch or 0.",
      "type_changed_reason": "This calculation uses FIXED LOD expressions (aggregations scoped to specific dimensions), which are aggregate/context-based operations and must be implemented as a measure."
    }
  ]
}