{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Delta Down T CAD 30Y",
      "dax_expression": "VAR market = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_NAME]\nVAR term = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TERM_LABEL]\nVAR dd = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Delta Down T CAD]\nVAR fix = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Fix Value T]\nVAR valueFor = dd + fix\nRETURN\nSWITCH(\n    market,\n    \"sCADMid\",\n        IF(term = \"12 Yr\" || term = \"12 Yr Swap\", 2/20 * valueFor, 0)\n        + IF(term = \"15 Yr\" || term = \"15 Yr Swap\", 5/20 * valueFor, 0)\n        + IF(term = \"20 Yr\" || term = \"20 Yr Swap\", 10/20 * valueFor, 0)\n        + IF(term = \"25 Yr\" || term = \"25 Yr Swap\", valueFor, 0)\n        + IF(term = \"30 Yr\" || term = \"30 Yr Swap\", valueFor, 0)\n        + IF(term = \"40 Yr\" || term = \"40 Yr Swap\", valueFor, 0)\n        + IF(term = \"50 Yr\" || term = \"50 Yr Swap\", valueFor, 0),\n\n    \"CADsCAD1mMid\",\n        IF(term = \"12 Yr\" || term = \"12 Yr Swap\", 2/20 * valueFor, 0)\n        + IF(term = \"15 Yr\" || term = \"15 Yr Swap\", 5/20 * valueFor, 0)\n        + IF(term = \"20 Yr\" || term = \"20 Yr Swap\", 10/20 * valueFor, 0)\n        + IF(term = \"30 Yr\" || term = \"30 Yr Swap\", valueFor, 0),\n\n    \"CADsCAD6mMid\",\n        IF(term = \"12 Yr\" || term = \"12 Yr Swap\", 2/20 * valueFor, 0)\n        + IF(term = \"15 Yr\" || term = \"15 Yr Swap\", 5/20 * valueFor, 0)\n        + IF(term = \"20 Yr\" || term = \"20 Yr Swap\", 10/20 * valueFor, 0)\n        + IF(term = \"30 Yr\" || term = \"30 Yr Swap\", valueFor, 0),\n\n    \"CADsCAD1dMid\",\n        IF(term = \"12 Yr\" || term = \"12 Yr Swap\", 2/20 * valueFor, 0)\n        + IF(term = \"15 Yr\" || term = \"15 Yr Swap\", 5/20 * valueFor, 0)\n        + IF(term = \"20 Yr\" || term = \"20 Yr Swap\", 10/20 * valueFor, 0)\n        + IF(term = \"25 Yr\" || term = \"25 Yr Swap\", 15/20 * valueFor, 0)\n        + IF(term = \"30 Yr\" || term = \"30 Yr Swap\", valueFor, 0)\n        + IF(term = \"40 Yr\" || term = \"40 Yr Swap\", valueFor, 0)\n        + IF(term = \"50 Yr\" || term = \"50 Yr Swap\", valueFor, 0),\n\n    \"USDsCADUSDMid\",\n        IF(term = \"12 Yr\" || term = \"12 Yr Swap\", 2/20 * valueFor, 0)\n        + IF(term = \"15 Yr\" || term = \"15 Yr Swap\", 5/20 * valueFor, 0)\n        + IF(term = \"20 Yr\" || term = \"20 Yr Swap\", 10/20 * valueFor, 0)\n        + IF(term = \"25 Yr\" || term = \"25 Yr Swap\", 15/20 * valueFor, 0)\n        + IF(term = \"30 Yr\" || term = \"30 Yr Swap\", valueFor, 0)\n        + IF(term = \"40 Yr\" || term = \"40 Yr Swap\", valueFor, 0)\n        + IF(term = \"50 Yr\" || term = \"50 Yr Swap\", valueFor, 0),\n\n    0\n)",
      "solution_explanation": "Converted the Tableau CASE on [MARKET_NAME] and nested IFs on [TERM_LABEL] into a row-level calculated column using DAX. All column references were transformed to the 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Column] format. Intermediate variables (market, term, dd, fix, valueFor) are used for readability and to match the original per-row logic. The expression returns 0 when no MARKET_NAME match is found."
    }
  ]
}