{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Market Title",
      "dax_expression": "VAR MarketName = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_NAME]\nVAR MarketTitle = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_TITLE]\nVAR cleaned = REPLACE(REPLACE(MarketName, \"Mid\", \"\"), \"s\", \"\")\nRETURN\nIF(\n    ISBLANK(MarketTitle),\n    IF(\n        CONTAINSSTRING(MarketName, \"Mid\"),\n        IF(\n            LEFT(MarketName, 1) = \"s\" && LEN(MarketName) = 7,\n            SWITCH(\n                cleaned,\n                \"USO\", \"Major USD\",\n                \"CBO\", \"Major CAD\",\n                \"EBO\", \"Major EUR\",\n                \"GBO\", \"Major GBP\",\n                \"Major \" & cleaned\n            ),\n            IF(\n                CONTAINSSTRING(MarketName, \"USDs\") && CONTAINSSTRING(MarketName, \"USDMid\"),\n                \"CCIRS \" & REPLACE(REPLACE(MarketName, \"USDs\", \"\"), \"USDMid\", \"\") & \" Basis\",\n                IF(\n                    MarketName = \"USDsUSDCUPOMMid\", \"3m USD CUPOM Basis\",\n                    IF(\n                        MarketName = \"EURsEURLibor-6mMid\", \"6m EUR Libor Basis\",\n                        IF(\n                            LEFT(MarketName, 1) = \"f\",\n                            IF(\n                                CONTAINSSTRING(MarketName, \"swpnN\"), MID(MarketName, 2, 3) & \" Normal Swaption Vol\",\n                                IF(\n                                    CONTAINSSTRING(MarketName, \"swpn\"), MID(MarketName, 2, 3) & \" Swaption Vol\",\n                                    IF(\n                                        CONTAINSSTRING(MarketName, \"SABRN\"), MID(MarketName, 2, 3) & \" Normal SABR Vol\",\n                                        IF(\n                                            CONTAINSSTRING(MarketName, \"SABR\"), MID(MarketName, 2, 3) & \" SABR Vol\",\n                                            IF(\n                                                CONTAINSSTRING(MarketName, \"cap\") && CONTAINSSTRING(MarketName, \"1mNMid\"), MID(MarketName, 2, 3) & \" Normal 1M CAP Vol\",\n                                                IF(\n                                                    CONTAINSSTRING(MarketName, \"cap\") && CONTAINSSTRING(MarketName, \"NMid\"), MID(MarketName, 2, 3) & \" Normal CAP Vol\",\n                                                    IF(\n                                                        CONTAINSSTRING(MarketName, \"cap\"), MID(MarketName, 2, 3) & \" CAP Vol\",\n                                                        \"ERR\"\n                                                    )\n                                                )\n                                            )\n                                        )\n                                    )\n                                )\n                            ),\n                            IF(\n                                CONTAINSSTRING(MarketName, \"1m\") && CONTAINSSTRING(MarketName, \"Mid\"), \"1m \" & LEFT(MarketName, 3) & \" Basis\",\n                                IF(\n                                    CONTAINSSTRING(MarketName, \"3\") && CONTAINSSTRING(MarketName, \"Mid\"), \"3m \" & LEFT(MarketName, 3) & \" Basis\",\n                                    IF(\n                                        CONTAINSSTRING(MarketName, \"6\") && CONTAINSSTRING(MarketName, \"Mid\"), \"6m \" & LEFT(MarketName, 3) & \" Basis\",\n                                        IF(\n                                            CONTAINSSTRING(MarketName, \"12\") && CONTAINSSTRING(MarketName, \"Mid\"), \"12m \" & LEFT(MarketName, 3) & \" Basis\",\n                                            MarketName\n                                        )\n                                    )\n                                )\n                            )\n                        )\n                    )\n                )\n            )\n        ),\n        IF(\n            CONTAINSSTRING(MarketName, \"skew\"), MID(MarketName, 2, 3) & \" Swaption Skew Vol\",\n            IF(\n                CONTAINSSTRING(MarketName, \"IR \"), REPLACE(MarketName, \"IR \", \"Major \"),\n                MarketName\n            )\n        )\n    ),\n    IF(CONTAINSSTRING(MarketTitle, \"Eur\"), REPLACE(MarketTitle, \"Eur\", \"EUR\"), MarketTitle)\n)",
      "solution_explanation": "Converted the Tableau row-level conditional logic into a calculated column using VARs for readability. ISNULL -> ISBLANK, CONTAINS -> CONTAINSSTRING, mid -> MID, CASE -> SWITCH. All column references were transformed to 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Column] format and string concatenation uses &."
    }
  ]
}