{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Swap Spread Filter",
      "dax_expression": "IF(\n    'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"CDS\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FX Forward\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FX Forward Non-Deliverable\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FX Futures\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"IR Futures\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FX Spot\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"Swaps\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"Forex\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"Swaptions\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"Caps/Floors\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TERM DEPOSIT WITH BNS UNIT ROL\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT BY BANK\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"CALL LOAN FLOATING\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"EVERGREEN & MARGIN LOCK 3M\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"NON-ACCRUAL FLOATING\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TIME DEPOSIT BY BANK\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FLOATING CALL NOTICE DEPOSIT\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT WITH BNS SUBSIDIARY RO\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TERM DEPOSIT BY BNS UNIT (ROLL\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"Loan/Deposit\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"ARBITRAGE LOAN\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"EVERGREEN & MARGIN LOCK 1Y\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FLOATING NOTICE DEPOSITS 6M\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TERM DEPOSIT WITH BNS UNIT\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TERM DEPOSIT BY BNS UNIT\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"CALL DEPOSIT FLOAT\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT WITH BNS SUBSIDIARY\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"INFRASTRUCTURE AMORTIZING DEP\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"EVERGREEN & MARGIN LOCK 6M\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"O/N FED FUNDS PURCHASED\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT BY BNS SUBSIDIARY\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FIXED CALL NOTICE DEPOSIT\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT WITH BANK ROLLOVER\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT BY BNS SUBSIDIARY ROLL\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"COMMERCIAL LOAN\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"ARBITRAGE DEPOSIT\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TIME DEPOSIT BY BANK ROLLOVER\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"TERM FED FUNDS PURCHASED\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT WITH BANK\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT BY BANK (ROLLOVER)\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT BY CUSTOMER (ROLL\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"DEPOSIT BY CUSTOMER\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"CALL LOAN FIXED\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"CALL DEPOSIT  FIXED\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"IR Futures Option\"\n    || 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[INSTRUMENT_TYPE] = \"FX Swap\",\n    1,\n    0\n)",
      "solution_explanation": "Converted the row-level IF with many OR checks on INSTRUMENT_TYPE into a calculated column that returns 1 when the instrument type matches any listed value, otherwise 0."
    },
    {
      "type": "measure",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Swap Spread Filter Dyn",
      "dax_expression": "VAR sel = SELECTEDVALUE('DV01 or Swap Spread'[Display As])\nVAR filter = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Swap Spread Filter]\nRETURN\nIF(\n    sel = \"All DV01\",\n    1,\n    IF(\n        sel = \"Swap Spread\",\n        IF(filter = 1, 1, 0),\n        IF(\n            sel = \"Non Swap Spread\",\n            IF(filter = 0, 1, 0),\n            BLANK()\n        )\n    )\n)",
      "solution_explanation": "Replaced the Tableau parameter reference with SELECTEDVALUE('DV01 or Swap Spread'[Display As]) and implemented the CASE logic using nested IFs; references the calculated column 'Swap Spread Filter'.",
      "type_changed_reason": "The calculation references a parameter, and all parameter-based calculations must be measures."
    }
  ]
}