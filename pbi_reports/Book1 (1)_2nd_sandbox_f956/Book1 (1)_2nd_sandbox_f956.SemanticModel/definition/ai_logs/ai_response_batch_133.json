{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Delta Down T USD 1Y",
      "dax_expression": "VAR Market = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_NAME]\nVAR Term = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TERM_LABEL]\nVAR DeltaFix = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Delta Down T USD] + 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Fix Value T]\nVAR Days = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Risk Date # of Days]\nRETURN\nSWITCH(\n    TRUE(),\n    Market = \"sUSDMid\" && (Term = \"1 Yr\" || Term = \"1 Yr Swap\"), DeltaFix,\n    Market = \"sUSDMid\" && (Term = \"6 Month\" || Term = \"6 Month Swap\"), (1/3) * DeltaFix,\n    Market = \"sUSDMid\" && (Term = \"9 Month\" || Term = \"9 Month Swap\"), (2/3) * DeltaFix,\n    Market = \"sUSDMid\" && (Term = \"15 Month\" || Term = \"15 Month Swap\"), (3/4) * DeltaFix,\n    Market = \"sUSDMid\" && (Term = \"18 Month\" || Term = \"18 Month Swap\"), (2/4) * DeltaFix,\n    Market = \"sUSDMid\" && (Term = \"21 Month\" || Term = \"21 Month Swap\"), (1/4) * DeltaFix,\n\n    Market = \"sUSOMid\" && (\n        Term = \"4 Month\" || Term = \"5 Month\" || Term = \"6 Month\" || Term = \"6 Month Swap\" || Term = \"9 Month\" || Term = \"9 Month Swap\" || Term = \"12 Month\"\n    ), DeltaFix,\n\n    Market = \"USDsUSD12mMid\" && Term = \"12 Month\", DeltaFix,\n\n    Market = \"USDsUSD1mMid\" && (Term = \"6 Month\" || Term = \"6 Month Swap\"), (1/3) * DeltaFix,\n    Market = \"USDsUSD1mMid\" && (Term = \"9 Month\" || Term = \"9 Month Swap\"), (2/3) * DeltaFix,\n    Market = \"USDsUSD1mMid\" && Term = \"12 Month\", DeltaFix,\n    Market = \"USDsUSD1mMid\" && Term = \"15 Month\", (3/4) * DeltaFix,\n    Market = \"USDsUSD1mMid\" && Term = \"18 Month\", (2/4) * DeltaFix,\n    Market = \"USDsUSD1mMid\" && Term = \"21 Month\", (1/4) * DeltaFix,\n\n    Market = \"USDsUSD6mMid\" && (Term = \"6 Month\" || Term = \"6 Month Swap\" || Term = \"12 Month\"), DeltaFix,\n\n    Market = \"USDsUSD1dMid\" && (Term = \"6 Month\" || Term = \"6 Month Swap\"), (1/3) * DeltaFix,\n    Market = \"USDsUSD1dMid\" && (Term = \"9 Month\" || Term = \"9 Month Swap\"), (2/3) * DeltaFix,\n    Market = \"USDsUSD1dMid\" && (\n        Term = \"12 Month\" || Term = \"12 Month Swap\" || (Days > 91 && Days <= 365 && INT(VALUE(RIGHT(Term, 2))) >= 17)\n    ), DeltaFix,\n    Market = \"USDsUSD1dMid\" && Term = \"15 Month\", (3/4) * DeltaFix,\n    Market = \"USDsUSD1dMid\" && (Term = \"18 Month\" || Term = \"18 Month Swap\"), (2/4) * DeltaFix,\n    Market = \"USDsUSD1dMid\" && (Term = \"21 Month\" || Term = \"21 Month Swap\"), (1/4) * DeltaFix,\n\n    Market = \"USDsUSDs1dMid\" && (Days > 91 && Days <= 365), DeltaFix,\n\n    0\n)",
      "solution_explanation": "Converted the Tableau CASE/WHEN logic into a DAX calculated column. Used VARs for MARKET_NAME, TERM_LABEL, the combined DeltaFix (Delta Down T USD + Fix Value T) and Risk Date # of Days. Implemented the CASE using SWITCH(TRUE(), ...) with equivalent boolean conditions and proportional multipliers. All field references were converted to the 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Column] format. The RIGHT(...) + INT conversion is represented as INT(VALUE(RIGHT(Term, 2))) to match the Tableau int(right(...,2)) logic."
    }
  ]
}