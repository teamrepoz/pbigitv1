{
  "calculations": [
    {
      "name": "Book Count Filter",
      "table_name": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "tableau_expression": "if max({exclude [Book Level 1], [TERM_LABEL]:(countd([Book Level 1]))})>6 then \"Dynamic Height\" else \"Dynamic View\"\r\nend",
      "datatype": "string",
      "calculation_context": {
        "Expression": "if max({exclude [Book Level 1], [TERM_LABEL]:(countd([Book Level 1]))})>6 then \"Dynamic Height\" else \"Dynamic View\"\r\nend",
        "calculated_fields": {
          "Book Level 1": "case [Parameters].[Book Level 1 Mapping]\r\nwhen \"Default\" then [BOOK_LEVEL1]\r\nwhen \"IRD\" then [Book Level 1 NA IRD]\r\nwhen \"CAD Cash Rates\" then [Book Level 1 SCI]\r\nwhen \"CMF\" then [Book Level 1 CMF]\r\n\r\n\r\nelse [BOOK_LEVEL1]\r\nEND",
          "Book Level 1 CMF": "// Created by Antoine Des Aulniers Favreau based on Mapping provided by Arun and Chandra Subramanian -- 24 Mai 2017\r\n//Edited mapping Shyamala , mapping provided by Chelsea\r\n\r\ncase [BOOK_LEVEL1]\r\nwhen \"CMFNYA\" then \"New York\"\r\nwhen \"CTRD\" then \"COLLTRD\"\r\nwhen \"BNSPFF\" then \"REPOS\"\r\nwhen \"SCFI\" then \"REPOS\"\r\nwhen \"COMMP\" then \"MONEYMKT\"\r\nwhen \"UINV\" then \"MONEYMKT\"\r\nwhen \"REPO2\" then \"REPOS\"\r\nwhen \"REPO3\" then \"REPOS\"\r\nwhen \"REPO4\" then \"REPOS\"\r\nwhen \"REPO\" then \"REPOS\"\r\nwhen \"108\" then \"REPOS\"\r\nwhen \"131\" then \"REPOS\"\r\nwhen \"140\" then \"REPOS\"\r\nwhen \"201\" then \"REPOS\"\r\nwhen \"202\" then \"REPOS\"\r\nwhen \"233\" then \"REPOS\"\r\nwhen \"234\" then \"REPOS\"\r\nwhen \"238\" then \"REPOS\"\r\nwhen \"287\" then \"REPOS\"\r\nwhen \"288\" then \"REPOS\"\r\nwhen \"289\" then \"REPOS\"\r\nwhen \"290\" then \"REPOS\"\r\nwhen \"292\" then \"REPOS\"\r\nwhen \"293\" then \"REPOS\"\r\nwhen \"294\" then \"REPOS\"\r\nwhen \"392\" then \"REPOS\"\r\nwhen \"394\" then \"REPOS\"\r\nwhen \"397\" then \"REPOS\"\r\nwhen \"280\" then \"REPOS\"\r\nwhen \"838\" then \"REPOS\"\r\nwhen \"820\" then \"REPOS\"\r\nwhen \"TRIPARTY\" then \"REPOS\"\r\nwhen \"SEC LEND\" then \"REPOS\"\r\nwhen \"137\" then \"REPOS\"\r\nwhen \"138\" then \"REPOS\"\r\nwhen \"231\" then \"REPOS\"\r\nwhen \"232\" then \"REPOS\"\r\nwhen \"287\" then \"REPOS\"\r\nwhen \"RP_140\" then \"REPOS\"\r\nwhen \"DPGREPO\" then \"REPOS\"\r\nwhen \"BNSREPO\" then \"REPOS\"\r\nwhen \"RG\" then \"REPOS\"\r\nwhen \"RP_RPO\" then \"REPOS\"\r\nwhen \"534\" then \"REPOS\"  //Modified by ADF based on Arun mapping on 7/27/2017\r\nwhen \"CMFFUND\" then \"REPOS\"  //Modified by ADF based on Chelsea mapping on 2/08/2018\r\nwhen \"CMFEQSBL\" then \"REPOS\"  //Modified by ADF based on Arun mapping on 7/27/2017  Modified again based on Chelsea mapping on 2/9/2018\r\nwhen \"CMFTOT\" then \"REPOS\" ////Modified by ADF based on Chelsea mapping on 2/09/2018\r\nwhen \"TORCMFBF\" then \"REPOS\"\r\nwhen \"BNSALREPO\" then \"Singapore\"\r\nwhen \"AGY\" then \"MONEYMKT\"\r\n\r\n\r\nwhen \"COLTRD\" then \"COLLTRD\"\r\nwhen \"COLLTRD\" then \"COLLTRD\"\r\nwhen \"COLLTRD Cash\" then \"COLLTRD\"\r\nwhen \"CTRDMTM\" then \"COLLTRD\" //Modified by ADF based on Arun mapping on 7/27/2017\r\n\r\nwhen \"PORTMGMTCUST\" then \"PORTMGMTCUST\"\r\nwhen \"PORTMGMTRE\" then \"PORTMGMTCUST\"\r\nwhen \"PORTREPO\" then \"PORTMGMTCUST\"\r\n\r\nwhen  \"AHSWAPS\" then \"SHORTSWAPS\"\r\nwhen \"AHSWAPS Cash\" then \"SHORTSWAPS\"\r\n\r\nwhen  \"SHORTSWAPS\" then \"SHORTSWAPS\"\r\nwhen \"SHORTSWAPS Cash\" then \"SHORTSWAPS\"\r\n\r\nwhen  \"PROVBILL\" then \"MONEYMKT\"\r\nwhen  \"BILL\" then \"MONEYMKT\"\r\nwhen  \"800\" then \"MONEYMKT\"\r\nwhen  \"810\" then \"MONEYMKT\"\r\nwhen  \"811\" then \"MONEYMKT\"\r\nwhen  \"819\" then \"MONEYMKT\"\r\nwhen  \"821\" then \"MONEYMKT\"\r\nwhen  \"898\" then \"MONEYMKT\"\r\nwhen  \"905\" then \"MONEYMKT\"\r\nwhen  \"PROV\" then \"MONEYMKT\"\r\nwhen  \"BILL\" then \"MONEYMKT\"\r\n\r\nwhen \"LDNTRS\" then \"London\"\r\nwhen \"LDNCASH3\" then \"London\"\r\nwhen \"DPCA\" then \"London\"\r\nwhen \"RCCA\" then \"London\"\r\nwhen \"COCA\" then \"London\"\r\nwhen \"DPMA\" then \"London\"\r\nwhen \"DPFF\" then \"London\"\r\nwhen \"RCMA\" then \"London\"\r\nwhen \"RCFF\" then \"London\"\r\nwhen \"EFCO\" then \"London\"\r\nwhen \"LDNCASH1\" then \"London\"\r\nwhen \"LDNCASH2\" then \"London\"\r\nwhen \"LDNCCS\" then \"London\"\r\nwhen \"LDNGBPSWAP\" then \"London\"\r\nwhen \"LDNREPO\" then \"London\"\r\nwhen \"LDNSTIR\" then \"London\"\r\nwhen \"ECMFQ\" then \"London\"  //Modified by ADF based on Chelsea mapping on 2/08/2018\r\nwhen \"ACMFQ\" then \"London\"  //Modified by ADF based on Chelsea mapping on 2/08/2018\r\nwhen \"CMFLDNEQFF\" then \"London\" //Modified by Shyamala based on Bella's request 3/4/2019\r\nwhen \"CMFSBEEQFF\" then \"London\" //Modified by Shyamala based on Bella's request 3/4/2019\r\n\r\n\r\nwhen \"NYREPOS\" then \"New York\"\r\nwhen \"NYFUNDING\" then \"New York\"\r\nwhen \"NYFIDERIV\" then \"New York\"\r\nwhen \"NTBIL\" then \"New York\"\r\nwhen \"NYRPOTSY\" then \"New York\"\r\nwhen \"NRFN\" then \"New York\"\r\nwhen \"NRMB\" then \"New York\"\r\n\r\nwhen \"SGREPOASIA\" then \"Singapore\"\r\nwhen \"SGREPOCAS1\" then \"Singapore\"\r\nwhen \"SGTRS\" then \"Singapore\"\r\nwhen \"BNSBALREPO\" then \"Singapore\"\r\nwhen \"MBSBALREPO\" then \"Singapore\"\r\nwhen \"FFSBALREPO\" then \"Singapore\" //Modified by ADF based on Arun mapping on 9/13/2017\r\nwhen \"SGRA\" then \"Singapore\" //Modified by ADF based on Arun mapping on 9/13/2017\r\n//when \"STRUCTBF\" then \"STRUCTURED\"\r\nwhen \"ECICORPMB\" then \"New York\" \r\nwhen \"CMFLDNMB\" then \"London\"\r\n\r\n\r\nelse \"UNMAPPED\"\r\n\r\nend",
          "Book Level 1 NA IRD": "//Created by Antoine Des Aulniers Favreau based on Mapping provided by Arun Subramanian -- February 2017\r\n// Modified on 25 May 2017 based on new Mapping provided by Arun Subramanian\r\n// Modified on 29 May 2017 based on new Mapping provided by Arun Subramanian\r\n\r\n\r\n\r\nif [BOOK_LOCATION]= \"New York\" then \"NY Books\" \r\nelse case [BOOK_LEVEL1]\r\n\r\nwhen \"NOTESACCTSTR\" then \"STRUCTURED\"   //Added by ADF on 7/2/2018\r\nwhen \"TORUSFI\" then \"STRUCTURED\"        //Added by ADF on 7/2/2018\r\nwhen \"NOTESMKTRNF\" then \"STRUCTURED\"\r\n\r\nwhen \"NINDR\" then \"NY Books\" \r\nwhen \"NIRSW\" then \"NY Books\" \r\nwhen \"NYINFDIR\" then \"NY Books\" \r\nwhen \"NYIRSWAP\" then \"NY Books\" \r\n\r\n\r\nwhen \"SWAPSHEDGE\" then \"SWAPS\"\r\nwhen \"TORFIHEDGE\" then \"SWAPS\"\r\nwhen \"STRATEGIC\" then \"SWAPS\"           //Added by ADF on 7/2/2018\r\nwhen \"TORUSSWAP\" then \"SWAPS\"           //Added by ADF on 7/2/2018\r\n\r\nwhen \"TSWP\" then \"SWAPS\"                //Changed by ADF on 7/2/2018\r\n\r\nelse [BOOK_LEVEL1]\r\nend end",
          "Book Level 1 Mapping": "\"Default\"",
          "Book Level 1 SCI": "case [BOOK_LEVEL1]\r\n//MMI Books\r\nwhen \"101\" then \"CANADAS\"\r\nwhen \"104\" then \"CANADAS\"\r\nwhen \"106\" then \"CANADAS\"\r\nwhen \"107\" then \"CANADAS\"\r\nwhen \"109\" then \"CANADAS\"\r\nwhen \"110\" then \"CANADAS\"\r\nwhen \"118\" then \"CANADAS\"\r\nwhen \"165\" then \"CANADAS\"\r\nwhen \"166\" then \"CANADAS\"\r\nwhen \"203\" then \"CANADAS\"\r\nwhen \"230\" then \"CANADAS\"\r\n//when \"108\" then \"CANADAS\"\r\nwhen \"229\" then \"GOVFIN\"\r\nwhen \"228\" then \"GOVFIN\"\r\nwhen \"181\" then \"GOVFIN\"\r\nwhen \"120\" then \"MUNI\"\r\nwhen \"134\" then \"MUNI\"\r\nwhen \"154\" then \"MUNI\"\r\nwhen \"183\" then \"MUNI\"\r\nwhen \"335\" then \"MUNI\"\r\nwhen \"105\" then \"PROVI\"\r\nwhen \"113\" then \"PROVI\"\r\nwhen \"114\" then \"PROVI\"\r\nwhen \"115\" then \"PROVI\"\r\nwhen \"116\" then \"PROVI\"\r\nwhen \"132\" then \"PROVI\"\r\nwhen \"135\" then \"PROVI\"\r\nwhen \"215\" then \"PROVI\"\r\nwhen \"235\" then \"PROVI\"\r\nwhen \"111\" then \"RRB\"\r\nwhen \"BILL\" then \"BILL\"\r\nwhen \"108\" then \"Others\"\r\nwhen \"131\" then \"Others\"\r\nwhen \"140\" then \"Others\"\r\nwhen \"201\" then \"Others\"\r\nwhen \"202\" then \"Others\"\r\nwhen \"233\" then \"Others\"\r\nwhen \"234\" then \"Others\"\r\nwhen \"238\" then \"Others\"\r\nwhen \"287\" then \"Others\"\r\nwhen \"288\" then \"Others\"\r\nwhen \"289\" then \"Others\"\r\nwhen \"290\" then \"Others\"\r\nwhen \"292\" then \"Others\"\r\nwhen \"293\" then \"Others\"\r\nwhen \"294\" then \"Others\"\r\nwhen \"392\" then \"Others\"\r\nwhen \"394\" then \"Others\"\r\nwhen \"397\" then \"Others\"\r\nwhen \"811\" then \"Others\"\r\nwhen \"898\" then \"Others\"\r\nwhen \"905\" then \"Others\"\r\nwhen \"280\" then \"Others\"\r\nwhen \"820\" then \"Others\"\r\nwhen \"119\" then \"CORPS\"\r\nwhen \"121\" then \"CORPS\"\r\nwhen \"125\" then \"CORPS\"\r\nwhen \"130\" then \"CORPS\"\r\nwhen \"208\" then \"CORPS\"\r\nwhen \"225\" then \"CORPS\"\r\nwhen \"226\" then \"CORPS\"\r\nwhen \"236\" then \"CORPS\"\r\nwhen \"276\" then \"CORPS\"\r\nwhen \"277\" then \"CORPS\"\r\nwhen \"383\" then \"HY\"\r\nwhen \"384\" then \"HY\"\r\nwhen \"800\" then \"MONEYMKT\"\r\nwhen \"802\" then \"MONEYMKT\"\r\nwhen \"808\" then \"MONEYMKT\"\r\nwhen \"814\" then \"MONEYMKT\"\r\nwhen \"815\" then \"MONEYMKT\"\r\nwhen \"819\" then \"MONEYMKT\"\r\nwhen \"821\" then \"MONEYMKT\"\r\nwhen \"822\" then \"MONEYMKT\"\r\nwhen \"838\" then \"MONEYMKT\"\r\nwhen \"851\" then \"MONEYMKT\"\r\nwhen \"860\" then \"MONEYMKT\"\r\nwhen \"862\" then \"MONEYMKT\"\r\nwhen \"863\" then \"MONEYMKT\"\r\nwhen \"864\" then \"MONEYMKT\"\r\nwhen \"BA\" then \"MONEYMKT\"\r\nwhen \"BDN\" then \"MONEYMKT\"\r\nwhen \"PROV\" then \"MONEYMKT\"\r\nwhen \"COMMP\" then \"MONEYMKT\"\r\nwhen \"UINV\" then \"MONEYMKT\"\r\nwhen \"261\" then \"BONDSTRIP\"\r\nwhen \"271\" then \"BONDSTRIP\"\r\nwhen \"273\" then \"BONDSTRIP\"\r\nwhen \"275\" then \"BONDSTRIP\"\r\nwhen \"276\" then \"BONDSTRIP\"\r\nwhen \"555\" then \"BONDSTRIP\"\r\nwhen \"123\" then \"MGMTFI\"\r\nwhen \"390\" then \"MGMTFI\"\r\nwhen \"126\" then \"MBS\"\r\nwhen \"127\" then \"MBS\"\r\nwhen \"237\" then \"MBS\"\r\nwhen \"239\" then \"MBS\"\r\nwhen \"326\" then \"MBS\"\r\nwhen \"327\" then \"MBS\"\r\nwhen \"129\" then \"MBS\"\r\n\r\n\r\n\r\n///K2 Books\r\nwhen \"CANADAS\" then \"CANADAS\"\r\nwhen \"CANADAS2\" then \"CANADAS\"\r\nwhen \"CANADAS3\" then \"CANADAS\"\r\nwhen \"GOVFIN\" then \"GOVFIN\"\r\nwhen \"MUNI\" then \"MUNI\"\r\nwhen \"PROVI\" then \"PROVI\"\r\nwhen \"RRB\" then \"RRB\"\r\nwhen \"REPO\" then \"Others\"\r\nwhen \"REPO2\" then \"Others\"\r\nwhen \"REPO3\" then \"Others\"\r\nwhen \"REPO4\" then \"Others\"\r\nwhen \"CORPORATES\" then \"CORPS\"\r\nwhen \"CORPORATES2\" then \"CORPS\"\r\nwhen \"HIGHYIELD\" then \"HY\"\r\nwhen \"MONEYMKT\" then \"MONEYMKT\"\r\nwhen \"MONEYMKT2\" then \"MONEYMKT\"\r\nwhen \"BONDSTRIP\" then \"BONDSTRIP\"\r\nwhen \"ASSETSWAP\" then \"ASSETSWAP\"\r\nwhen \"CPHEDGE\" then \"CPHEDGE\"\r\nwhen \"MGMTFI\" then \"MGMTFI\"\r\nwhen \"MBS\" then \"MBS\"\r\nwhen \"ABS\" then \"MBS\"\r\n\r\nelse [BOOK_LEVEL1]\r\nend"
        },
        "parameters": [],
        "col_to_datatype_mapping": {
          "BOOK_LEVEL1": "string",
          "BOOK_LOCATION": "string",
          "TERM_LABEL": "string"
        },
        "calc_fields_to_datatype_mapping": {
          "Book Level 1 Mapping": "string",
          "Book Level 1": "String",
          "Book Level 1 CMF": "String",
          "Book Level 1 NA IRD": "String",
          "Book Level 1 SCI": "String"
        }
      }
    }
  ]
}