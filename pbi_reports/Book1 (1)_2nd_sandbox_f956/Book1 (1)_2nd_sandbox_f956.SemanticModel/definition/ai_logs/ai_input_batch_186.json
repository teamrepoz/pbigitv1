{
  "calculations": [
    {
      "name": "Deal ",
      "table_name": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "tableau_expression": "if [Parameters].[Deal Netted/ByLeg] then \r\n\r\n    if [INSTRUMENT_SUBTYPE] = \"CC Swap\"\r\n    or [INSTRUMENT_SUBTYPE]= \"Forex Forward\"\r\n    or [INSTRUMENT_SUBTYPE]= \"Forex Swap\"\r\n    or [INSTRUMENT_SUBTYPE]= \"Forex Strip\"\r\n    then left([Deal],6)\r\n    else [Deal] \r\n    END\r\n\r\nelse [Deal]\r\nEND",
      "datatype": "string",
      "calculation_context": {
        "Expression": "if [Parameters].[Deal Netted/ByLeg] then \r\n\r\n    if [INSTRUMENT_SUBTYPE] = \"CC Swap\"\r\n    or [INSTRUMENT_SUBTYPE]= \"Forex Forward\"\r\n    or [INSTRUMENT_SUBTYPE]= \"Forex Swap\"\r\n    or [INSTRUMENT_SUBTYPE]= \"Forex Strip\"\r\n    then left([Deal],6)\r\n    else [Deal] \r\n    END\r\n\r\nelse [Deal]\r\nEND",
        "calculated_fields": {
          "Deal Netted/ByLeg": "true",
          "Deal": "IF [TRADE_ID]=\"N/A\" THEN [SECURITY_ID] ELSE [TRADE_ID] END"
        },
        "parameters": [
          "Deal Netted/ByLeg"
        ],
        "col_to_datatype_mapping": {
          "INSTRUMENT_SUBTYPE": "string",
          "SECURITY_ID": "string",
          "TRADE_ID": "string"
        },
        "calc_fields_to_datatype_mapping": {
          "Deal Netted/ByLeg": "boolean",
          "Deal": "String"
        }
      }
    }
  ]
}