{
  "fixes": [
    {
      "type": "measure",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "NVega Up + Vega Up FX",
      "dax_expression": "VAR fx = SELECTEDVALUE('FXConversion'[Display As])\nVAR baseValue = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[NVEGA_UP] + 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[VEGA_UP]\nVAR mccy = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[marketCCY]\nRETURN\nSWITCH(\n    TRUE(),\n    fx = \"Reported\", baseValue,\n    fx = \"Natural\",\n        SWITCH(\n            TRUE(),\n            mccy = \"AUD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_AUD],\n            mccy = \"BRL\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_BRL],\n            mccy = \"BRO\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_BRO],\n            mccy = \"CAD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CAD],\n            mccy = \"CHF\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CHF],\n            mccy = \"CLF\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CLF],\n            mccy = \"CLP\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CLP],\n            mccy = \"CNH\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CNH],\n            mccy = \"COP\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_COP],\n            mccy = \"CRC\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CRC],\n            mccy = \"EUR\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_EUR],\n            mccy = \"GBP\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_GBP],\n            mccy = \"HKD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_HKD],\n            mccy = \"INR\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_INR],\n            mccy = \"JPY\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_JPY],\n            mccy = \"KRW\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_KRW],\n            mccy = \"MXN\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_MXN],\n            mccy = \"MXC\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_MXC],\n            mccy = \"MEX\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_MEX],\n            mccy = \"MYR\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_MYR],\n            mccy = \"NZD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_NZD],\n            mccy = \"PEN\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_PEN],\n            mccy = \"SEK\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_SEK],\n            mccy = \"SGD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_SGD],\n            mccy = \"USD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_USD],\n            mccy = \"UVR\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_UVR],\n            mccy = \"UYU\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_UYU],\n            BLANK()\n        ),\n    fx = \"CAD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_CAD],\n    fx = \"USD\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_USD],\n    fx = \"EUR\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_EUR],\n    fx = \"GBP\", baseValue * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_GBP],\n    BLANK()\n)",
      "solution_explanation": "Recreated the Tableau CASE logic using SELECTEDVALUE for the FXConversion parameter and SWITCH/VARs. Inlined the NVega Up + Vega Up calculation as a row-level baseValue and used the marketCCY calculated field to map currency-specific conversion rates. Returns BLANK() where Tableau returned null.",
      "type_changed_reason": "The calculation references a Tableau parameter ([Parameters].[FXConversion]), and parameter-based calculations must be created as measures."
    }
  ]
}