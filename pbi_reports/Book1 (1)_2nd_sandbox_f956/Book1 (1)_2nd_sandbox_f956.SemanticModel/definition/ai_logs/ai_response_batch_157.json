{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Vega & NVega Up USD",
      "dax_expression": "('Risk_GFIRates_Reports_Excel_Rolling (local copy)'[NVEGA_UP] + 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[VEGA_UP]) * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TO_USD]",
      "solution_explanation": "Converted row-level arithmetic ([NVEGA_UP] + [VEGA_UP]) * [TO_USD] to a calculated column using fully qualified table[column] references."
    },
    {
      "type": "measure",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Date Sign",
      "dax_expression": "VAR useCustom = SELECTEDVALUE('Use Custom Date'[Display As])\nVAR endDateParam = SELECTEDVALUE('End Date'[Display As])\nVAR startDateParam = SELECTEDVALUE('Start Date'[Display As])\nRETURN\nIF(\n    useCustom,\n    IF(\n        'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Max Date Exclude] = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[EFFECTIVE_DATE],\n        1,\n        IF(\n            'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MAX_DATE -1day] = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[EFFECTIVE_DATE],\n            -1,\n            0\n        )\n    ),\n    IF(\n        'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[EFFECTIVE_DATE] = endDateParam,\n        1,\n        IF(\n            'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[EFFECTIVE_DATE] = startDateParam,\n            -1,\n            0\n        )\n    )\n)",
      "solution_explanation": "Translated the nested IF logic to DAX with VARs and SELECTEDVALUE for each Tableau parameter. All column references are fully qualified.",
      "type_changed_reason": "The original calculation references Tableau parameters (e.g. [Parameters].[Use Custom Date]), and per rules any parameter-based calculation must be created as a measure."
    },
    {
      "type": "measure",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Vega & NVega Up USD Diff",
      "dax_expression": "VAR Result = SUMX(\n    'Risk_GFIRates_Reports_Excel_Rolling (local copy)',\n    'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Vega & NVega Up USD] * 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Date Sign]\n)\nRETURN\nResult",
      "solution_explanation": "Created as a measure that iterates the table with SUMX, multiplying the calculated column 'Vega & NVega Up USD' by the measure 'Date Sign' and summing the results.",
      "type_changed_reason": "This calculation depends (indirectly) on a parameter-based field ('Date Sign'); per rules any calculation referencing parameters must be a measure."
    }
  ]
}