{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Delta Down T USD 5Y",
      "dax_expression": "VAR Market = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_NAME]\nVAR Term = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TERM_LABEL]\nVAR RiskDays = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Risk Date # of Days]\nVAR DD = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Delta Down T USD]\nVAR FV = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Fix Value T]\nVAR SumTF = (DD + FV)\nRETURN\nSWITCH(\n    TRUE(),\n    Market = \"sUSDMid\" && (Term = \"3 Yr\" || Term = \"3 Yr Swap\"), (1/3) * SumTF,\n    Market = \"sUSDMid\" && (Term = \"4 Yr\" || Term = \"4 Yr Swap\"), (2/3) * SumTF,\n    Market = \"sUSDMid\" && (Term = \"5 Yr\" || Term = \"5 Yr Swap\"), SumTF,\n    Market = \"sUSDMid\" && (Term = \"6 Yr\" || Term = \"6 Yr Swap\"), (1/2) * SumTF,\n\n    Market = \"USDsUSD1mMid\" && (Term = \"3 Yr\" || Term = \"3 Yr Swap\"), (1/3) * SumTF,\n    Market = \"USDsUSD1mMid\" && (Term = \"4 Yr\" || Term = \"4 Yr Swap\"), (2/3) * SumTF,\n    Market = \"USDsUSD1mMid\" && (Term = \"5 Yr\" || Term = \"5 Yr Swap\"), SumTF,\n    Market = \"USDsUSD1mMid\" && (Term = \"6 Yr\" || Term = \"6 Yr Swap\"), (1/2) * SumTF,\n\n    Market = \"USDsUSD6mMid\" && (Term = \"3 Yr\" || Term = \"3 Yr Swap\"), (1/3) * SumTF,\n    Market = \"USDsUSD6mMid\" && (Term = \"4 Yr\" || Term = \"4 Yr Swap\"), (2/3) * SumTF,\n    Market = \"USDsUSD6mMid\" && (Term = \"5 Yr\" || Term = \"5 Yr Swap\"), SumTF,\n    Market = \"USDsUSD6mMid\" && (Term = \"6 Yr\" || Term = \"6 Yr Swap\"), (1/2) * SumTF,\n\n    Market = \"USDsUSD12mMid\" && (Term = \"3 Yr\" || Term = \"3 Yr Swap\"), (1/3) * SumTF,\n    Market = \"USDsUSD12mMid\" && (Term = \"4 Yr\" || Term = \"4 Yr Swap\"), (2/3) * SumTF,\n    Market = \"USDsUSD12mMid\" && (Term = \"5 Yr\" || Term = \"5 Yr Swap\"), SumTF,\n\n    Market = \"USDsUSD1dMid\" && (Term = \"3 Yr\" || Term = \"3 Yr Swap\"), (1/3) * SumTF,\n    Market = \"USDsUSD1dMid\" && (Term = \"4 Yr\" || Term = \"4 Yr Swap\"), (2/3) * SumTF,\n    Market = \"USDsUSD1dMid\" && (Term = \"5 Yr\" || Term = \"5 Yr Swap\"), SumTF,\n    Market = \"USDsUSD1dMid\" && (Term = \"6 Yr\" || Term = \"6 Yr Swap\"), (1/2) * SumTF,\n\n    Market = \"USDsUSDs1dMid\" && (Term = \"3 Yr\" || Term = \"3 Yr Swap\"), (1/3) * SumTF,\n    Market = \"USDsUSDs1dMid\" && (Term = \"4 Yr\" || Term = \"4 Yr Swap\"), (2/3) * SumTF,\n    Market = \"USDsUSDs1dMid\" && (Term = \"5 Yr\" || Term = \"5 Yr Swap\" || (RiskDays > 731 && RiskDays <= 1400)), SumTF,\n    Market = \"USDsUSDs1dMid\" && (Term = \"6 Yr\" || Term = \"6 Yr Swap\"), (1/2) * SumTF,\n\n    0\n)",
      "solution_explanation": "Translated Tableau CASE/WHEN logic into DAX using VARs for readability and SWITCH(TRUE()) to evaluate MARKET_NAME and TERM_LABEL branches. All field references converted to 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Column]. Preserves row-level arithmetic and conditional branches; returns 0 when no branch matches."
    }
  ]
}