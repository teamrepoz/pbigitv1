{
  "calculations": [
    {
      "name": "Book Level 1 NA IRD Title",
      "table_name": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "tableau_expression": "if countd([Book Level 1 NA IRD])>1 then \"All Books\" \r\n    else if attr([Book Level 1 NA IRD])=\"NY Books\" then attr([Book Level 1 NA IRD])\r\n    ELSE attr([Book Level 1 NA IRD]) +\" Book\" end end",
      "datatype": "string",
      "calculation_context": {
        "Expression": "if countd([Book Level 1 NA IRD])>1 then \"All Books\" \r\n    else if attr([Book Level 1 NA IRD])=\"NY Books\" then attr([Book Level 1 NA IRD])\r\n    ELSE attr([Book Level 1 NA IRD]) +\" Book\" end end",
        "calculated_fields": {
          "Book Level 1 NA IRD": "//Created by Antoine Des Aulniers Favreau based on Mapping provided by Arun Subramanian -- February 2017\r\n// Modified on 25 May 2017 based on new Mapping provided by Arun Subramanian\r\n// Modified on 29 May 2017 based on new Mapping provided by Arun Subramanian\r\n\r\n\r\n\r\nif [BOOK_LOCATION]= \"New York\" then \"NY Books\" \r\nelse case [BOOK_LEVEL1]\r\n\r\nwhen \"NOTESACCTSTR\" then \"STRUCTURED\"   //Added by ADF on 7/2/2018\r\nwhen \"TORUSFI\" then \"STRUCTURED\"        //Added by ADF on 7/2/2018\r\nwhen \"NOTESMKTRNF\" then \"STRUCTURED\"\r\n\r\nwhen \"NINDR\" then \"NY Books\" \r\nwhen \"NIRSW\" then \"NY Books\" \r\nwhen \"NYINFDIR\" then \"NY Books\" \r\nwhen \"NYIRSWAP\" then \"NY Books\" \r\n\r\n\r\nwhen \"SWAPSHEDGE\" then \"SWAPS\"\r\nwhen \"TORFIHEDGE\" then \"SWAPS\"\r\nwhen \"STRATEGIC\" then \"SWAPS\"           //Added by ADF on 7/2/2018\r\nwhen \"TORUSSWAP\" then \"SWAPS\"           //Added by ADF on 7/2/2018\r\n\r\nwhen \"TSWP\" then \"SWAPS\"                //Changed by ADF on 7/2/2018\r\n\r\nelse [BOOK_LEVEL1]\r\nend end"
        },
        "parameters": [],
        "col_to_datatype_mapping": {
          "BOOK_LEVEL1": "string",
          "BOOK_LOCATION": "string"
        },
        "calc_fields_to_datatype_mapping": {
          "Book Level 1 NA IRD": "String"
        }
      }
    }
  ]
}