{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Delta Down T CAD 1Y",
      "dax_expression": "VAR MarketName = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_NAME]\nVAR TermLabel = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TERM_LABEL]\nVAR BaseValue = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Delta Down T CAD] + 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Fix Value T]\nVAR Result_sCADMid =\n    IF(TermLabel = \"6 Month\" || TermLabel = \"6 Month Swap\", 1/3 * BaseValue, 0)\n    + IF(TermLabel = \"9 Month\" || TermLabel = \"9 Month Swap\", 2/3 * BaseValue, 0)\n    + IF(TermLabel = \"1 Yr\" || TermLabel = \"1 Yr Swap\", BaseValue, 0)\n    + IF(TermLabel = \"15 Month\" || TermLabel = \"15 Month Swap\", 3/4 * BaseValue, 0)\n    + IF(TermLabel = \"18 Month\" || TermLabel = \"18 Month Swap\", 2/4 * BaseValue, 0)\n    + IF(TermLabel = \"21 Month\" || TermLabel = \"21 Month Swap\", 1/4 * BaseValue, 0)\nVAR Result_sCBOMid =\n    IF(\n        TermLabel = \"4 Month\" || TermLabel = \"5 Month\" || TermLabel = \"6 Month\" || TermLabel = \"9 Month\" ||\n        TermLabel = \"6 Month Swap\" || TermLabel = \"9 Month Swap\" || TermLabel = \"12 Month\",\n        BaseValue,\n        0\n    )\nVAR Result_CADsCAD1mMid =\n    IF(TermLabel = \"6 Month\" || TermLabel = \"6 Month Swap\", 1/3 * BaseValue, 0)\n    + IF(TermLabel = \"9 Month\" || TermLabel = \"9 Month Swap\", 2/3 * BaseValue, 0)\n    + IF(TermLabel = \"12 Month\" || TermLabel = \"12 Month Swap\", BaseValue, 0)\n    + IF(TermLabel = \"15 Month\", 3/4 * BaseValue, 0)\n    + IF(TermLabel = \"18 Month\", 2/4 * BaseValue, 0)\n    + IF(TermLabel = \"21 Month\", 1/4 * BaseValue, 0)\nVAR Result_CADsCAD6mMid =\n    IF(TermLabel = \"6 Month\" || TermLabel = \"6 Month Swap\", 1/3 * BaseValue, 0)\n    + IF(TermLabel = \"9 Month\" || TermLabel = \"9 Month Swap\", 2/3 * BaseValue, 0)\n    + IF(TermLabel = \"12 Month\", BaseValue, 0)\nVAR Result_CADsCAD1dMid =\n    IF(\n        TermLabel = \"12 Month\" || TermLabel = \"12 Month Swap\" || (\n            'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Market Subtype] = \"Major Curve\" &&\n            'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Risk Date # of Days] > 91 &&\n            'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Risk Date # of Days] <= 365\n        ),\n        BaseValue,\n        0\n    )\nVAR Result_USDsCADUSDMid =\n    IF(TermLabel = \"6 Month\" || TermLabel = \"6 Month Swap\", 1/3 * BaseValue, 0)\n    + IF(TermLabel = \"9 Month\" || TermLabel = \"9 Month Swap\", 2/3 * BaseValue, 0)\n    + IF(TermLabel = \"12 Month\", BaseValue, 0)\n    + IF(TermLabel = \"15 Month\", 3/4 * BaseValue, 0)\n    + IF(TermLabel = \"18 Month\" || TermLabel = \"18 Month Swap\", 2/4 * BaseValue, 0)\n    + IF(TermLabel = \"21 Month\", 1/4 * BaseValue, 0)\nRETURN\nSWITCH(\n    TRUE(),\n    MarketName = \"sCADMid\", Result_sCADMid,\n    MarketName = \"sCBOMid\", Result_sCBOMid,\n    MarketName = \"CADsCAD1mMid\", Result_CADsCAD1mMid,\n    MarketName = \"CADsCAD6mMid\", Result_CADsCAD6mMid,\n    MarketName = \"CADsCAD1dMid\", Result_CADsCAD1dMid,\n    MarketName = \"USDsCADUSDMid\", Result_USDsCADUSDMid,\n    0\n)",
      "solution_explanation": "Converted Tableau CASE/WHEN and IF logic into a DAX calculated column using SWITCH(TRUE()) with VARs for readability. All column references were transformed to the 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Column] format and each IF branch reproduces the original fractional multipliers and term checks."
    }
  ]
}