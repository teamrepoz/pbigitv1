{
  "fixes": [
    {
      "type": "calculated_column",
      "table": "Risk_GFIRates_Reports_Excel_Rolling (local copy)",
      "name": "Delta Down T CAD 5Y",
      "dax_expression": "VAR MarketName = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[MARKET_NAME]\nVAR Term = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[TERM_LABEL]\nVAR MarketSubtype = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Market Subtype]\nVAR RiskDays = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Risk Date # of Days]\nVAR DeltaFix = 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Delta Down T CAD] + 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[Fix Value T]\nRETURN\nSWITCH(\n    TRUE(),\n    MarketName = \"sCADMid\",\n        IF(Term = \"3 Yr\" || Term = \"3 Yr Swap\", (1/3) * DeltaFix, 0)\n        + IF(Term = \"4 Yr\" || Term = \"4 Yr Swap\", (2/3) * DeltaFix, 0)\n        + IF(Term = \"5 Yr\" || Term = \"5 Yr Swap\", DeltaFix, 0)\n        + IF(Term = \"6 Yr\" || Term = \"6 Yr Swap\", (4/5) * DeltaFix, 0)\n        + IF(Term = \"7 Yr\" || Term = \"7 Yr Swap\", (3/5) * DeltaFix, 0)\n        + IF(Term = \"8 Yr\" || Term = \"8 Yr Swap\", (2/5) * DeltaFix, 0)\n        + IF(Term = \"9 Yr\" || Term = \"9 Yr Swap\", (1/5) * DeltaFix, 0),\n\n    MarketName = \"CADsCAD1mMid\",\n        IF(Term = \"3 Yr\" || Term = \"3 Yr Swap\", (1/3) * DeltaFix, 0)\n        + IF(Term = \"4 Yr\" || Term = \"4 Yr Swap\", (2/3) * DeltaFix, 0)\n        + IF(Term = \"5 Yr\" || Term = \"5 Yr Swap\", DeltaFix, 0)\n        + IF(Term = \"7 Yr\" || Term = \"7 Yr Swap\", (3/5) * DeltaFix, 0),\n\n    MarketName = \"CADsCAD6mMid\",\n        IF(Term = \"3 Yr\" || Term = \"3 Yr Swap\", (1/3) * DeltaFix, 0)\n        + IF(Term = \"4 Yr\" || Term = \"4 Yr Swap\", (2/3) * DeltaFix, 0)\n        + IF(Term = \"5 Yr\" || Term = \"5 Yr Swap\", DeltaFix, 0)\n        + IF(Term = \"7 Yr\" || Term = \"7 Yr Swap\", (3/5) * DeltaFix, 0),\n\n    MarketName = \"CADsCAD1dMid\",\n        IF(Term = \"3 Yr\" || Term = \"3 Yr Swap\", (1/3) * DeltaFix, 0)\n        + IF(Term = \"4 Yr\" || Term = \"4 Yr Swap\", (2/3) * DeltaFix, 0)\n        + IF(\n            Term = \"5 Yr\" || Term = \"5 Yr Swap\"\n            || (MarketSubtype = \"Major Curve\" && RiskDays > 731 && RiskDays <= 1096),\n            DeltaFix,\n            0\n          )\n        + IF(Term = \"6 Yr\" || Term = \"6 Yr Swap\", (4/5) * DeltaFix, 0)\n        + IF(Term = \"7 Yr\" || Term = \"7 Yr Swap\", (3/5) * DeltaFix, 0)\n        + IF(Term = \"8 Yr\" || Term = \"8 Yr Swap\", (2/5) * DeltaFix, 0)\n        + IF(Term = \"9 Yr\" || Term = \"9 Yr Swap\", (1/5) * DeltaFix, 0),\n\n    MarketName = \"USDsCADUSDMid\",\n        IF(Term = \"3 Yr\" || Term = \"3 Yr Swap\", (1/3) * DeltaFix, 0)\n        + IF(Term = \"4 Yr\" || Term = \"4 Yr Swap\", (2/3) * DeltaFix, 0)\n        + IF(Term = \"5 Yr\" || Term = \"5 Yr Swap\", DeltaFix, 0)\n        + IF(Term = \"6 Yr\" || Term = \"6 Yr Swap\", (4/5) * DeltaFix, 0)\n        + IF(Term = \"7 Yr\" || Term = \"7 Yr Swap\", (3/5) * DeltaFix, 0)\n        + IF(Term = \"8 Yr\" || Term = \"8 Yr Swap\", (2/5) * DeltaFix, 0)\n        + IF(Term = \"9 Yr\" || Term = \"9 Yr Swap\", (1/5) * DeltaFix, 0),\n\n    0\n)\n",
      "solution_explanation": "Converted the Tableau CASE + IF logic into a row-level DAX calculated column using SWITCH(TRUE()) with IF() branches. All column references were transformed to 'Risk_GFIRates_Reports_Excel_Rolling (local copy)'[ColumnName]. This is a calculated column because the logic operates at the row level and contains no aggregations or parameters."
    }
  ]
}